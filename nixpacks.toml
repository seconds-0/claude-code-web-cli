# Nixpacks configuration for Next.js monorepo web app
# Used by Railway for builds

[phases.setup]
nixPkgs = ["nodejs_20"]
cmds = ["corepack enable", "corepack prepare pnpm@9.15.0 --activate"]

[phases.install]
cmds = ["pnpm install --frozen-lockfile"]

[phases.build]
cmds = ["pnpm turbo run build --filter=@ccc/web"]

[start]
cmd = "node apps/web/.next/standalone/apps/web/server.js"
